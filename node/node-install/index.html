
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../cardano-network/">
      
      
        <link rel="next" href="../node-run/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.10+insiders-4.52.3">
    
    
      
        <title>ノードインストール - Cardano Developer Japan</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fc8cf87c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.a7cc3451.css">
        <style>:root{--md-text-font:"Noto Sans Japanese";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../None">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="light-green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#preprod" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../.." title="Cardano Developer Japan" class="md-header__button md-logo" aria-label="Cardano Developer Japan" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cardano Developer Japan
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ノードインストール
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="light-green"  aria-label="ダークモード"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="ダークモード" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="light-green"  aria-label="ライトモード"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="ライトモード" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="共有" aria-label="共有" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cardano Developer Japan" class="md-nav__button md-logo" aria-label="Cardano Developer Japan" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Cardano Developer Japan
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    HOME
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../what-cardano/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    カルダノとは？
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    カルダノ開発入門
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    カルダノ開発入門
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cardano-network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    ネットワーク概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    ノードインストール
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    ノードインストール
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. 概要
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 概要">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        必要スペック
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. 依存関係インストール
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 依存関係インストール">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#libsodium" class="md-nav__link">
    <span class="md-ellipsis">
      
        Libsodium
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secp256k1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secp256k1
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blst" class="md-nav__link">
    <span class="md-ellipsis">
      
        blst
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ghcup" class="md-nav__link">
    <span class="md-ellipsis">
      
        GHCUP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. ソースコードからビルド
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. ノード設定ファイルの修正
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. オンチェーンDBダウンロード
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. オンチェーンDBダウンロード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5-1" class="md-nav__link">
    <span class="md-ellipsis">
      
        5-1.依存環境インストール
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-2rust" class="md-nav__link">
    <span class="md-ellipsis">
      
        5-2.Rustインストール
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-3mithril-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        5-3.Mithril-Clientインストール
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-4db" class="md-nav__link">
    <span class="md-ellipsis">
      
        5-4.DBダウンロード・解凍
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node-run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    ノード起動
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. 概要
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 概要">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        必要スペック
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. 依存関係インストール
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 依存関係インストール">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#libsodium" class="md-nav__link">
    <span class="md-ellipsis">
      
        Libsodium
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secp256k1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secp256k1
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blst" class="md-nav__link">
    <span class="md-ellipsis">
      
        blst
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ghcup" class="md-nav__link">
    <span class="md-ellipsis">
      
        GHCUP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. ソースコードからビルド
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. ノード設定ファイルの修正
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-db" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. オンチェーンDBダウンロード
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. オンチェーンDBダウンロード">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5-1" class="md-nav__link">
    <span class="md-ellipsis">
      
        5-1.依存環境インストール
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-2rust" class="md-nav__link">
    <span class="md-ellipsis">
      
        5-2.Rustインストール
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-3mithril-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        5-3.Mithril-Clientインストール
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-4db" class="md-nav__link">
    <span class="md-ellipsis">
      
        5-4.DBダウンロード・解凍
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="ナビゲーション" >
    <ol class="md-path__list">
      
        
  
    <li class="md-path__item">
      <a href="../.." class="md-path__link">
        
  <span class="md-ellipsis">
    HOME
  </span>

      </a>
    </li>
  

      
      
        
  
    
    
      <li class="md-path__item">
        <a href="../cardano-network/" class="md-path__link">
          
  <span class="md-ellipsis">
    カルダノ開発入門
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="preprod"><strong>ノードインストール(PreProdテストネット)</strong><a class="headerlink" href="#preprod" title="Permanent link">&para;</a></h1>
<h2 id="1"><strong>1. 概要</strong><a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="_1">必要スペック<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>ネットワークにより必要要件が異なります。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="テストネット" name="__tabbed_1" type="radio" /><input id="メインネット" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="テストネット">テストネット</label><label for="メインネット">メインネット</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th style="text-align: left;">項目</th>
<th style="text-align: left;">要件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>OS</strong></td>
<td style="text-align: left;">64-bit Linux (Ubuntu 22.04 LTS)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>CPU</strong></td>
<td style="text-align: left;">2Ghz以上 2コアのIntelまたはAMD x86プロセッサー</td>
</tr>
<tr>
<td style="text-align: left;"><strong>メモリ</strong></td>
<td style="text-align: left;">16GB</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ストレージ</strong></td>
<td style="text-align: left;">150GB</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th style="text-align: left;">項目</th>
<th style="text-align: left;">要件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>OS</strong></td>
<td style="text-align: left;">64-bit Linux (Ubuntu 22.04 LTS)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>CPU</strong></td>
<td style="text-align: left;">2Ghz以上 2コアのIntelまたはAMD x86プロセッサー</td>
</tr>
<tr>
<td style="text-align: left;"><strong>メモリ</strong></td>
<td style="text-align: left;">24GB</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ストレージ</strong></td>
<td style="text-align: left;">300GB</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="admonition hint">
<p class="admonition-title">インストールバージョン</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Node</th>
<th style="text-align: left;">CLI</th>
<th style="text-align: left;">GHC</th>
<th style="text-align: left;">Cabal</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">8.7.3</td>
<td style="text-align: left;">8.17.0.0</td>
<td style="text-align: left;">8.10.7</td>
<td style="text-align: left;">3.8.1.0</td>
</tr>
</tbody>
</table>
<ul>
<li>最新のGHC/Cabalバージョンはcardano-node/cliのビルドに失敗するため必ず指定されたバージョンをインストールしてください。</li>
</ul>
</div>
<h2 id="2"><strong>2. 依存関係インストール</strong><a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<p>新しいTMUXセッションを開く</p>
<div class="highlight"><pre><span></span><code>tmux new -s build
</code></pre></div>
<p>Ubuntuを最新状態にします。
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span>-y<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y
</code></pre></div></p>
<p>必要なパッケージをインストールします
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>git<span class="w"> </span>jq<span class="w"> </span>bc<span class="w"> </span>automake<span class="w"> </span>tmux<span class="w"> </span>rsync<span class="w"> </span>htop<span class="w"> </span>curl<span class="w"> </span>build-essential<span class="w"> </span>pkg-config<span class="w"> </span>libffi-dev<span class="w"> </span>libgmp-dev<span class="w"> </span>libssl-dev<span class="w"> </span>libtinfo-dev<span class="w"> </span>libsystemd-dev<span class="w"> </span>zlib1g-dev<span class="w"> </span>make<span class="w"> </span>g++<span class="w"> </span>wget<span class="w"> </span>libncursesw5<span class="w"> </span>libtool<span class="w"> </span>autoconf<span class="w"> </span>liblmdb-dev<span class="w"> </span>-y
</code></pre></div></p>
<p>作業ディレクトリ作成
<div class="highlight"><pre><span></span><code>mkdir $HOME/git
</code></pre></div></p>
<h3 id="libsodium"><strong>Libsodium</strong><a class="headerlink" href="#libsodium" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/git
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/IntersectMBO/libsodium
<span class="nb">cd</span><span class="w"> </span>libsodium
git<span class="w"> </span>checkout<span class="w"> </span>dbb48cc
./autogen.sh
./configure
make
sudo<span class="w"> </span>make<span class="w"> </span>install
</code></pre></div>
<blockquote>
<p>makeコマンド実行後半に出現する <code>warning</code> は無視して大丈夫です。</p>
</blockquote>
<h3 id="secp256k1"><strong>Secp256k1</strong><a class="headerlink" href="#secp256k1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>cd $HOME/git
git clone https://github.com/bitcoin-core/secp256k1.git
</code></pre></div>
<div class="highlight"><pre><span></span><code>cd secp256k1/
git checkout ac83be33
./autogen.sh
./configure --prefix=/usr --enable-module-schnorrsig --enable-experimental
make
sudo make install
</code></pre></div>
<h3 id="blst"><strong>blst</strong><a class="headerlink" href="#blst" title="Permanent link">&para;</a></h3>
<p>1.blstダウンロード
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/git
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/supranational/blst
<span class="nb">cd</span><span class="w"> </span>blst
git<span class="w"> </span>checkout<span class="w"> </span>v0.3.10
./build.sh
</code></pre></div></p>
<p>2.設定ファイル作成</p>
<blockquote>
<p>このボックスはすべてコピーして実行してください</p>
</blockquote>
<div class="highlight"><pre><span></span><code>cat &gt; libblst.pc &lt;&lt; EOF
prefix=/usr/local
exec_prefix=\${prefix}
libdir=\${exec_prefix}/lib
includedir=\${prefix}/include

Name: libblst
Description: Multilingual BLS12-381 signature library
URL: https://github.com/supranational/blst
Version: 0.3.10
Cflags: -I\${includedir}
Libs: -L\${libdir} -lblst
EOF
</code></pre></div>
<p>3.設定ファイルコピー</p>
<blockquote>
<p>このボックスは1行ずつコピーして実行してください</p>
</blockquote>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cp<span class="w"> </span>libblst.pc<span class="w"> </span>/usr/local/lib/pkgconfig/
sudo<span class="w"> </span>cp<span class="w"> </span>bindings/blst_aux.h<span class="w"> </span>bindings/blst.h<span class="w"> </span>bindings/blst.hpp<span class="w">  </span>/usr/local/include/
sudo<span class="w"> </span>cp<span class="w"> </span>libblst.a<span class="w"> </span>/usr/local/lib
sudo<span class="w"> </span>chmod<span class="w"> </span><span class="nv">u</span><span class="o">=</span>rw,go<span class="o">=</span>r<span class="w"> </span>/usr/local/<span class="o">{</span>lib/<span class="o">{</span>libblst.a,pkgconfig/libblst.pc<span class="o">}</span>,include/<span class="o">{</span>blst.<span class="o">{</span>h,hpp<span class="o">}</span>,blst_aux.h<span class="o">}}</span>
</code></pre></div>
<h3 id="ghcup"><strong>GHCUP</strong><a class="headerlink" href="#ghcup" title="Permanent link">&para;</a></h3>
<p>インストール変数設定
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>
<span class="nv">BOOTSTRAP_HASKELL_NONINTERACTIVE</span><span class="o">=</span><span class="m">1</span>
<span class="nv">BOOTSTRAP_HASKELL_NO_UPGRADE</span><span class="o">=</span><span class="m">1</span>
<span class="nv">BOOTSTRAP_HASKELL_INSTALL_NO_STACK</span><span class="o">=</span>yes
<span class="nv">BOOTSTRAP_HASKELL_ADJUST_BASHRC</span><span class="o">=</span><span class="m">1</span>
<span class="nb">unset</span><span class="w"> </span>BOOTSTRAP_HASKELL_INSTALL_HLS
<span class="nb">export</span><span class="w"> </span>BOOTSTRAP_HASKELL_NONINTERACTIVE<span class="w"> </span>BOOTSTRAP_HASKELL_INSTALL_STACK<span class="w"> </span>BOOTSTRAP_HASKELL_ADJUST_BASHRC
</code></pre></div></p>
<p>インストール
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>--proto<span class="w"> </span><span class="s1">&#39;=https&#39;</span><span class="w"> </span>--tlsv1.2<span class="w"> </span>-sSf<span class="w"> </span>https://get-ghcup.haskell.org<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash
</code></pre></div></p>
<div class="admonition attention">
<p class="admonition-title">Cabal/GHCバージョンについて</p>
<p>最新バージョンはcardano-node/cliのビルドに失敗するため必ず以下で指定されたバージョンをインストールしてください。</p>
</div>
<p>cabalインストール
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>~/.bashrc
ghcup<span class="w"> </span>upgrade
ghcup<span class="w"> </span>install<span class="w"> </span>cabal<span class="w"> </span><span class="m">3</span>.8.1.0
ghcup<span class="w"> </span><span class="nb">set</span><span class="w"> </span>cabal<span class="w"> </span><span class="m">3</span>.8.1.0
</code></pre></div></p>
<p>GHCインストール</p>
<div class="highlight"><pre><span></span><code>ghcup<span class="w"> </span>install<span class="w"> </span>ghc<span class="w"> </span><span class="m">8</span>.10.7
ghcup<span class="w"> </span><span class="nb">set</span><span class="w"> </span>ghc<span class="w"> </span><span class="m">8</span>.10.7
</code></pre></div>
<p>バージョン確認</p>
<div class="highlight"><pre><span></span><code>cabal<span class="w"> </span>update
cabal<span class="w"> </span>--version
ghc<span class="w"> </span>--version
</code></pre></div>
<div class="admonition check">
<p class="admonition-title">チェック</p>
<p>Cabalバージョン：「3.8.1.0」<br />
GHCバージョン：「8.10.7」であることを確認してください。</p>
</div>
<p>環境変数を設定しパスを通します。<br />
ノード設定ファイルは <strong>$NODE_HOME</strong>(例：/home/user/cnode) に設定されます。</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.local/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
<span class="nb">echo</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">&quot;/usr/local/lib:</span><span class="nv">$LD_LIBRARY_PATH</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
<span class="nb">echo</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">PKG_CONFIG_PATH</span><span class="o">=</span><span class="s2">&quot;/usr/local/lib/pkgconfig:</span><span class="nv">$PKG_CONFIG_PATH</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
<span class="nb">echo</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/cnode<span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</code></pre></div>
<p>環境変数に接続ネットワークを指定する(PreProdテストネット)
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_CONFIG</span><span class="o">=</span>preprod<span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
<span class="nb">echo</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_NETWORK</span><span class="o">=</span><span class="s1">&#39;&quot;--testnet-magic 1&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
<span class="nb">echo</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CARDANO_NODE_NETWORK_ID</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</code></pre></div></p>
<details class="その他のネットワークの場合はこちら">
<summary>その他のネットワークの場合はこちら</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="previewテストネット" name="__tabbed_2" type="radio" /><input id="mainnetメインネット" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="previewテストネット">Preview(テストネット)</label><label for="mainnetメインネット">Mainnet(メインネット)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>echo export NODE_CONFIG=preview &gt;&gt; $HOME/.bashrc
echo export NODE_NETWORK=&#39;&quot;--testnet-magic 2&quot;&#39; &gt;&gt; $HOME/.bashrc
echo export CARDANO_NODE_NETWORK_ID=2 &gt;&gt; $HOME/.bashrc
</code></pre></div>
</div>
<div class="tabbed-block">
<p>echo export NODE_CONFIG=mainnet &gt;&gt; $HOME/.bashrc
echo export NODE_NETWORK='"--mainnet"' &gt;&gt; $HOME/.bashrc
echo export CARDANO_NODE_NETWORK_ID=mainnet &gt;&gt; $HOME/.bashrc</p>
</div>
</div>
</div>
</details>
<p>bashrc再読み込み
<div class="highlight"><pre><span></span><code>source $HOME/.bashrc
</code></pre></div></p>
<h2 id="3"><strong>3. ソースコードからビルド</strong><a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p>専用リポジトリからダウンロード
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/git
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/IntersectMBO/cardano-node.git
<span class="nb">cd</span><span class="w"> </span>cardano-node
git<span class="w"> </span>fetch<span class="w"> </span>--all<span class="w"> </span>--recurse-submodules<span class="w"> </span>--tags
git<span class="w"> </span>checkout<span class="w"> </span>tags/8.7.3
</code></pre></div></p>
<p>Cabalのビルドオプションを構成します。</p>
<div class="highlight"><pre><span></span><code>cabal<span class="w"> </span>clean
cabal<span class="w"> </span>update
cabal<span class="w"> </span>configure<span class="w"> </span>--with-compiler<span class="o">=</span>ghc-8.10.7
</code></pre></div>
<p>カルダノノードをビルドします。</p>
<div class="highlight"><pre><span></span><code>cabal<span class="w"> </span>build<span class="w"> </span>cardano-cli<span class="w"> </span>cardano-node
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">ヒント</p>
<p>サーバスペックによって、ビルド完了までに数分から数時間かかる場合があります。</p>
</div>
<p><strong>cardano-cli</strong>ファイルと <strong>cardano-node</strong>ファイルをbinディレクトリにコピーします。</p>
<p><div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cp<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span><span class="nv">$HOME</span>/git/cardano-node/dist-newstyle/build<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;cardano-cli&quot;</span><span class="k">)</span><span class="w"> </span>/usr/local/bin/cardano-cli
</code></pre></div>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cp<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span><span class="nv">$HOME</span>/git/cardano-node/dist-newstyle/build<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;cardano-node&quot;</span><span class="k">)</span><span class="w"> </span>/usr/local/bin/cardano-node
</code></pre></div></p>
<p><strong>cardano-cli</strong> と <strong>cardano-node</strong>のバージョンが最新Gitタグバージョンであることを確認してください。</p>
<div class="highlight"><pre><span></span><code>cardano-node version
cardano-cli version
</code></pre></div>
<p>以下の戻り値を確認する  </p>
<blockquote>
<p>cardano-cli 8.17.0.0 - linux-x86_64 - ghc-8.10<br />
git rev a4a8119b59b1fbb9a69c79e1e6900e91292161e7  </p>
<p>cardano-node 8.7.3 - linux-x86_64 - ghc-8.10<br />
git rev a4a8119b59b1fbb9a69c79e1e6900e91292161e7  </p>
</blockquote>
<p>TMUXセッションを閉じる</p>
<div class="highlight"><pre><span></span><code>exit
</code></pre></div>
<h2 id="4"><strong>4. ノード設定ファイルの修正</strong><a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<p>ノード構成に必要な設定ファイルを取得します。<br />
config.json、genesis.json、topology.json</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span><span class="nv">$NODE_HOME</span>
<span class="nb">cd</span><span class="w"> </span><span class="nv">$NODE_HOME</span>
wget<span class="w"> </span>--no-use-server-timestamps<span class="w"> </span>-q<span class="w"> </span>https://book.play.dev.cardano.org/environments/<span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>/byron-genesis.json<span class="w"> </span>-O<span class="w"> </span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>-byron-genesis.json
wget<span class="w"> </span>--no-use-server-timestamps<span class="w"> </span>-q<span class="w"> </span>https://book.play.dev.cardano.org/environments/<span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>/topology-legacy.json<span class="w"> </span>-O<span class="w"> </span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>-topology.json
wget<span class="w"> </span>--no-use-server-timestamps<span class="w"> </span>-q<span class="w"> </span>https://book.play.dev.cardano.org/environments/<span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>/shelley-genesis.json<span class="w"> </span>-O<span class="w"> </span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>-shelley-genesis.json
wget<span class="w"> </span>--no-use-server-timestamps<span class="w"> </span>-q<span class="w"> </span>https://book.play.dev.cardano.org/environments/<span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>/alonzo-genesis.json<span class="w"> </span>-O<span class="w"> </span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>-alonzo-genesis.json
wget<span class="w"> </span>--no-use-server-timestamps<span class="w"> </span>-q<span class="w"> </span>https://book.play.dev.cardano.org/environments/<span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>/conway-genesis.json<span class="w"> </span>-O<span class="w"> </span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>-conway-genesis.json
wget<span class="w"> </span>--no-use-server-timestamps<span class="w"> </span>-q<span class="w"> </span>https://book.play.dev.cardano.org/environments/<span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>/config.json<span class="w"> </span>-O<span class="w"> </span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>-config.json
</code></pre></div>
<p>以下のコードを実行し <strong>config.json</strong>ファイルを更新します。  </p>
<p>設定ファイルを書き換える</p>
<div class="highlight"><pre><span></span><code>sed<span class="w"> </span>-i<span class="w"> </span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span>-config.json<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s!&quot;AlonzoGenesisFile&quot;: &quot;alonzo-genesis.json&quot;!&quot;AlonzoGenesisFile&quot;: &quot;&#39;</span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span><span class="s1">&#39;-alonzo-genesis.json&quot;!&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s!&quot;ByronGenesisFile&quot;: &quot;byron-genesis.json&quot;!&quot;ByronGenesisFile&quot;: &quot;&#39;</span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span><span class="s1">&#39;-byron-genesis.json&quot;!&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s!&quot;ShelleyGenesisFile&quot;: &quot;shelley-genesis.json&quot;!&quot;ShelleyGenesisFile&quot;: &quot;&#39;</span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span><span class="s1">&#39;-shelley-genesis.json&quot;!&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s!&quot;ConwayGenesisFile&quot;: &quot;conway-genesis.json&quot;!&quot;ConwayGenesisFile&quot;: &quot;&#39;</span><span class="si">${</span><span class="nv">NODE_CONFIG</span><span class="si">}</span><span class="s1">&#39;-conway-genesis.json&quot;!&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s2">&quot;s/TraceMempool\&quot;: false/TraceMempool\&quot;: true/g&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s!&quot;TraceBlockFetchDecisions&quot;: false!&quot;TraceBlockFetchDecisions&quot;: true!&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s!&quot;rpKeepFilesNum&quot;: 10!&quot;rpKeepFilesNum&quot;: 30!&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;s!&quot;rpMaxAgeHours&quot;: 24!&quot;rpMaxAgeHours&quot;: 48!&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;/&quot;defaultScribes&quot;: \[/a\    \[\n      &quot;FileSK&quot;,\n      &quot;&#39;</span><span class="si">${</span><span class="nv">NODE_HOME</span><span class="si">}</span><span class="s1">&#39;/logs/node.json&quot;\n    \],&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">&#39;/&quot;setupScribes&quot;: \[/a\    \{\n      &quot;scFormat&quot;: &quot;ScJson&quot;,\n      &quot;scKind&quot;: &quot;FileSK&quot;,\n      &quot;scName&quot;: &quot;&#39;</span><span class="si">${</span><span class="nv">NODE_HOME</span><span class="si">}</span><span class="s1">&#39;/logs/node.json&quot;\n    \},&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s2">&quot;s/127.0.0.1/0.0.0.0/g&quot;</span>
</code></pre></div>
<p>環境変数を追加し、.bashrcファイルを更新します。</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CARDANO_NODE_SOCKET_PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$NODE_HOME</span><span class="s2">/db/socket&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
<span class="nb">source</span><span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</code></pre></div>
<h2 id="5-db"><strong>5. オンチェーンDBダウンロード</strong><a class="headerlink" href="#5-db" title="Permanent link">&para;</a></h2>
<div class="admonition hint">
<p class="admonition-title">ミスリルプロトコルとは？</p>
<p>ミスリルはIOG研究論文<a href="https://iohk.io/en/research/library/papers/mithril-stake-based-threshold-multisignatures/" target="_blank" rel="noopener">Mithril: Stake-based Threshold Multisignatures</a>に基づいて開発されたマルチ署名プロトコルです。</p>
<ul>
<li>現時点ではステークプールオペレータがミスリルアグリゲーターが作成するスナップショットDBに署名することで、チェーンデータを保証します。</li>
<li>メインネットの場合、ノード初回起動時のDB同期時間を約2日から約30分以内にまで短縮できます。</li>
<li>スナップショットノードバージョンとサーバーノードバージョンが異なる場合、DB再構築処理が入る場合がありDB同期までに数時間かかります。</li>
</ul>
</div>
<h3 id="5-1"><strong>5-1.依存環境インストール</strong><a class="headerlink" href="#5-1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>sudo apt install -y libssl-dev build-essential m4 jq
</code></pre></div>
<h3 id="5-2rust"><strong>5-2.Rustインストール</strong><a class="headerlink" href="#5-2rust" title="Permanent link">&para;</a></h3>
<p>RUST環境を準備します
<div class="highlight"><pre><span></span><code>mkdir $HOME/.cargo &amp;&amp; mkdir $HOME/.cargo/bin
chown -R $USER $HOME/.cargo
touch $HOME/.profile
chown $USER $HOME/.profile
</code></pre></div></p>
<p>rustupインストール
<div class="highlight"><pre><span></span><code>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre></div></p>
<blockquote>
<p>1) Proceed with installation (default) 1を入力してEnter</p>
</blockquote>
<div class="highlight"><pre><span></span><code>source $HOME/.cargo/env
</code></pre></div>
<div class="highlight"><pre><span></span><code>rustup install stable
rustup default stable
rustup update
rustup component add clippy rustfmt
rustup target add x86_64-unknown-linux-musl
</code></pre></div>
<h3 id="5-3mithril-client"><strong>5-3.Mithril-Clientインストール</strong><a class="headerlink" href="#5-3mithril-client" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>cd $HOME/git
git clone https://github.com/input-output-hk/mithril.git
</code></pre></div>
<div class="highlight"><pre><span></span><code>cd mithril
git fetch --all --prune
git checkout tags/2403.1
</code></pre></div>
<p>ビルド
<div class="highlight"><pre><span></span><code>cd mithril-client-cli
make build
</code></pre></div></p>
<p>バージョン確認
<div class="highlight"><pre><span></span><code>./mithril-client -V
</code></pre></div></p>
<blockquote>
<p>mithril-client 0.5.17</p>
</blockquote>
<p>システムフォルダへコピー
<div class="highlight"><pre><span></span><code>sudo mv mithril-client /usr/local/bin/mithril-client
</code></pre></div></p>
<p>バージョン確認
<div class="highlight"><pre><span></span><code>mithril-client -V
</code></pre></div></p>
<blockquote>
<p>mithril-client 0.5.17</p>
</blockquote>
<h3 id="5-4db"><strong>5-4.DBダウンロード・解凍</strong><a class="headerlink" href="#5-4db" title="Permanent link">&para;</a></h3>
<p>tmux作業ウィンドウを作成する
<div class="highlight"><pre><span></span><code>tmux new -s mithril
</code></pre></div></p>
<p>3-1.変数セット
<div class="highlight"><pre><span></span><code>export NETWORK=preprod
export AGGREGATOR_ENDPOINT=https://aggregator.release-preprod.api.mithril.network/aggregator
export GENESIS_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-preprod/genesis.vkey)
export SNAPSHOT_DIGEST=latest
</code></pre></div></p>
<details class="その他のネットワークの場合">
<summary>その他のネットワークの場合</summary>
<p>=== 'Preview(テストネット)'
    <div class="highlight"><pre><span></span><code>export NETWORK=preview
export AGGREGATOR_ENDPOINT=https://aggregator.pre-release-preview.api.mithril.network/aggregator
export GENESIS_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/pre-release-preview/genesis.vkey)
export SNAPSHOT_DIGEST=latest
</code></pre></div></p>
<p>=== 'Mainnet(メインネット)'
    <div class="highlight"><pre><span></span><code>export NETWORK=mainnet
export AGGREGATOR_ENDPOINT=https://aggregator.release-mainnet.api.mithril.network/aggregator
export GENESIS_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/genesis.vkey)
export SNAPSHOT_DIGEST=latest
</code></pre></div></p>
</details>
<p>3-2.最新スナップショットDL</p>
<p>既存DBフォルダ削除
<div class="highlight"><pre><span></span><code>rm -rf $NODE_HOME/db
</code></pre></div></p>
<p>最新スナップショットダウンロード及び解凍
<div class="highlight"><pre><span></span><code>mithril-client snapshot download --download-dir $NODE_HOME latest
</code></pre></div></p>
<blockquote>
<p>スナップショットダウンロード～解凍まで自動的に行われます。1/5～5/5が終了するまで待ちましょう</p>
</blockquote>
<p>tmux作業ウィンドウを終了する
<div class="highlight"><pre><span></span><code>exit
</code></pre></div></p>
<details class="tip">
<summary>その他のmithril-clientコマンド</summary>
<p><strong>Cardanoノードをブートストラップできる利用可能なスナップショットを一覧表示</strong>
<div class="highlight"><pre><span></span><code>mithril-client snapshot list
</code></pre></div></p>
<p>戻り値
<div class="no-copy highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Epoch | Immutable | Network | Digest                                                           | Size        | Locations | Created                           |</span>
<span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| 438   | 4822      | mainnet | dfc05780e0aaefc0e0466cbf69f3c82561e99f8b208626b9870a2e69344199dc | 40337208527 |         1 | 2023-09-27 05:21:39.339429454 UTC |</span>
<span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| 438   | 4821      | mainnet | bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3 | 40328088621 |         1 | 2023-09-26 23:13:39.908538941 UTC |</span>
<span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| 438   | 4820      | mainnet | d993a6267fefa1c34c0f270337dc3fa5324bc399f908e4a38ec80bb3348e8fe1 | 40320340866 |         1 | 2023-09-26 17:31:56.927673920 UTC |</span>
<span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| 438   | 4819      | mainnet | f8dd9c7ee08c6dffebe851a19af44bcb82990d4c174dc366dfaa18e40c20b842 | 40316728370 |         1 | 2023-09-26 11:50:50.123658352 UTC |</span>
<span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| 438   | 4818      | mainnet | 70c5c6847116d0a4ca93f81ac193db9d2a17084065963ae298646a157825ab7e | 40314024073 |         1 | 2023-09-26 05:44:57.236767751 UTC |</span>
<span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| 438   | 4817      | mainnet | 0597ca3e7d699155ce73aaae53805ea32a981ff213f772dd70e9dbead626acf2 | 40299093577 |         1 | 2023-09-25 23:13:32.500760943 UTC |</span>
<span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| 438   | 4816      | mainnet | 074a576bce34006369837899ecdaaac69f18e31dd193aaa5527d32a7c36fb10e | 40285275527 |         1 | 2023-09-25 17:33:02.562751472 UTC |</span>
<span class="l l-Scalar l-Scalar-Plain">+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+</span>
</code></pre></div></p>
<p><strong>スナップショット詳細表示</strong>
<div class="highlight"><pre><span></span><code>mithril-client snapshot show (Digestハッシュ値指定)
</code></pre></div>
戻り値
<div class="no-copy highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Info                  | Value                                                                                                                                                                         |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Epoch                 | 438                                                                                                                                                                           |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Immutable File Number | 4821                                                                                                                                                                          |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Network               | mainnet                                                                                                                                                                       |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Digest                | bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3                                                                                                              |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Size                  | 40328088621                                                                                                                                                                   |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Cardano node version  | 8.1.2                                                                                                                                                                         |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Location 1            | https://storage.googleapis.com/cdn.aggregator.release-mainnet.api.mithril.network/mainnet-e438-i4821.bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3.tar.zst |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Created               | 2023-09-26 23:13:39.908538941 UTC                                                                                                                                             |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="l l-Scalar l-Scalar-Plain">| Compression Algorithm | Zstandard                                                                                                                                                                     |</span>
<span class="l l-Scalar l-Scalar-Plain">+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span>
</code></pre></div></p>
</details>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  ページトップへ戻る
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="フッター" >
        
          
          <a href="../cardano-network/" class="md-footer__link md-footer__link--prev" aria-label="前: ネットワーク概要">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                前
              </span>
              <div class="md-ellipsis">
                ネットワーク概要
              </div>
            </div>
          </a>
        
        
          
          <a href="../node-run/" class="md-footer__link md-footer__link--next" aria-label="次: ノード起動">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                次
              </span>
              <div class="md-ellipsis">
                ノード起動
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Cardano Developer Japan
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            





<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">同意</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">拒否</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">サイトの設定</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "navigation.top", "navigation.instant", "navigation.tracking", "navigation.footer", "navigation.path", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.1e90e0fb.min.js", "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.82b033e4.min.js"></script>
      
        <script src="../../assets/external/unpkg.com/mermaid@10.7.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>